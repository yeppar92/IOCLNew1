(self.webpackChunkapp=self.webpackChunkapp||[]).push([[239],{6239:(i,s,e)=>{"use strict";e.r(s),e.d(s,{MrzoneModule:()=>S});var t=e(1116),o=e(4587),a=e(529),n=e(9609),r=e(8619),l=e(4345),c=e(3492),d=e(6710),m=e(992),g=e(1462);function h(i,s){if(1&i&&(r.TgZ(0,"span",47),r._uU(1),r.qZA()),2&i){const i=r.oxw();r.xp6(1),r.Oqu(i.timewallDetails.likes.length)}}function p(i,s){if(1&i&&(r.TgZ(0,"span",48),r._uU(1),r.qZA()),2&i){const i=r.oxw();r.xp6(1),r.Oqu(i.timewallDetails.comments.length)}}function _(i,s){if(1&i&&(r.TgZ(0,"div",49),r.TgZ(1,"div",50),r.TgZ(2,"div",51),r._UZ(3,"img",52),r.qZA(),r.qZA(),r.TgZ(4,"div",53),r.TgZ(5,"div",54),r.TgZ(6,"h6",55),r._uU(7),r.qZA(),r.TgZ(8,"span",56),r._uU(9),r.qZA(),r.qZA(),r.TgZ(10,"div",57),r._uU(11),r.qZA(),r.qZA(),r.qZA()),2&i){const i=s.$implicit,e=r.oxw();r.xp6(7),r.Oqu(i.user_id.name),r.xp6(2),r.Oqu(e.timeFormat(i.createdAt)),r.xp6(2),r.hij(" ",i.comment," ")}}function u(i,s){if(1&i){const i=r.EpF();r.TgZ(0,"button",58),r.NdJ("click",function(){return r.CHM(i),r.oxw().addComment()}),r._UZ(1,"img",59),r.qZA()}}function Z(i,s){if(1&i&&(r.TgZ(0,"div",60),r.TgZ(1,"div",61),r._UZ(2,"img",62),r._uU(3),r.qZA(),r.qZA()),2&i){const i=s.$implicit;r.xp6(3),r.hij(" ",i.user_id.name," ")}}const w=function(i){return{active:i}};let k=(()=>{class i{constructor(i,s,e,t){this.route=i,this.userService=s,this.toastr=e,this.spinner=t,this.timewallDetails={},this.comment="",n.updateLocale("en",{relativeTime:{future:"in %s",past:"%s",s:"just now",ss:"%d seconds ago",m:"a minute ago",mm:"%d minutes ago",h:"an hour ago",hh:"%dh ago",d:"a day ago",dd:"%d days ago",M:"a month ago",MM:"%d months ago",y:"a year ago",yy:"%d years ago"}})}ngOnInit(){this.route.params.subscribe(i=>{this.timewallDetail(i.id)})}addHistory(i){this.userService.addHistory({post_id:i}).subscribe(i=>{})}addPoints(i,s){this.userService.addPoints({post_id:this.timewallDetails._id,points:i,activity:s}).subscribe(i=>{})}timewallDetail(i){this.spinner.show(),this.userService.postDetail({id:i}).subscribe(s=>{this.spinner.hide(),200===s.statusCode?(this.timewallDetails=s.data.post,this.timewallDetails.video=a.N.api_url+"/post/videos/"+this.timewallDetails.video,this.timewallDetails.thumbnail=a.N.api_url+"/post/thumbnail/"+this.timewallDetails.thumbnail,this.addHistory(i)):this.toastr.error(s.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}timeFormat(i){return n(i).fromNow()}addComment(){this.spinner.show(),this.userService.addComment({post_id:this.timewallDetails._id,comment:this.comment}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewallDetails.comments.push(i.data.comment),this.addPoints(5,"Comment"),setTimeout(()=>{const i=document.getElementById("commentsDiv");i.scrollTop=i.scrollHeight},100),this.comment=""):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addLike(){this.spinner.show(),this.userService.addLike({post_id:this.timewallDetails._id}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewallDetails.isLiked=!this.timewallDetails.isLiked,this.timewallDetails.likes=i.data.likes,this.timewallDetails.isLiked?this.addPoints(5,"Like"):this.addPoints(-5,"Unlike")):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addBookmark(){this.spinner.show(),this.userService.addBookmark({post_id:this.timewallDetails._id}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewallDetails.isBookmarked=!this.timewallDetails.isBookmarked,this.timewallDetails.isBookmarked?this.addPoints(5,"Bookmark"):this.addPoints(-5,"Unbookmark")):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}postShare(){window.plugins.socialsharing.shareWithOptions({message:"Check this out at Indian Oil",subject:"Check this out at Indian Oil",files:[],url:a.N.front_url+`?type=mrzone&id=${this.timewallDetails._id}`},function(i){console.log("Share completed? "+i.completed),console.log("Shared to app: "+i.app)},function(i){console.log("Sharing failed with message: "+i)})}openMrApp(){window.openMrApp(a.N.api_url+"/apks/IOCL.apk","com.Rams.IOCLMRV")}}return i.\u0275fac=function(s){return new(s||i)(r.Y36(o.gz),r.Y36(l.K),r.Y36(c._W),r.Y36(d.t2))},i.\u0275cmp=r.Xpm({type:i,selectors:[["app-detail"]],decls:63,vars:19,consts:[[3,"showMenu","backUrl","showSearch"],[1,"page_mid_area"],[1,"other_dig_ele_wrp"],[1,"other_dig_ele_con_w"],["id","commentsDiv",1,"other_dig_ele_con_w_in","setting_in_wrp"],[1,"showcase_wrp","detail_wall_wrp_l"],[1,"showcase_img_wrp"],["controls","","autoplay","","id","timewallVideo",2,"width","100%","height","100%",3,"poster","src","ended"],[1,"showcase_icon_wrp","wall_detail_icon"],[1,"likebtn_list"],[2,"margin-right","5px",3,"click"],["src","assets/images/like_icon.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/like_icon_active.png",1,"showcase_icon","like_thub_l"],["class","showcase_icon_txt","data-toggle","modal","data-target","#likeModal",4,"ngIf"],["href","javascript:void(0)"],["src","assets/images/comment_icon.png",1,"showcase_icon"],["class","showcase_icon_txt",4,"ngIf"],["href","javascript:void(0)",1,"likebtn_list",3,"click"],["src","assets/images/bookmark.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/bookmark_active.png",1,"showcase_icon","like_thub_l"],[1,"float-right"],["href","javascript:void(0)",3,"click"],["src","assets/images/share_icon.png",1,"showcase_icon"],[1,"showcase_txt_wrp"],[1,"spacesbtn"],["href","javascript:void(0)",1,"awd_cert_btn",3,"click"],["src","assets/images/btn-one3.png",1,""],[1,"d-flex","align-items-center","justify-content-center","cmt_wrp"],[1,"container"],[1,"row","justify-content-center","mb-4"],[1,"col-lg-8"],[1,"comments","padd_botm50"],["class","comment d-flex mb-4",4,"ngFor","ngForOf"],[1,"row","justify-content-center","cmt_frm_wrp","cmt_frm_fixed_botm"],[1,"comment-form","d-flex","align-items-center"],[1,"flex-grow-1","ms-2","ms-sm-3"],["rows","1","placeholder","Start writing...",1,"form-control","py-0","px-1","border-0","textarea_cmd",2,"resize","none",3,"ngModel","ngModelChange"],["class","send_btn_cmt",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"awd_cert_btn"],["src","assets/images/btn-one.png",1,""],["id","likeModal",1,"modal"],[1,"modal-dialog"],[1,"modal-content"],["type","button","data-dismiss","modal",1,"close","poup_close"],[1,"modal-body"],[1,"like_user_list"],["class","score_p leaderbord_list",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#likeModal",1,"showcase_icon_txt"],[1,"showcase_icon_txt"],[1,"comment","d-flex","mb-4"],[1,"flex-shrink-0"],[1,"avatar","avatar-sm","rounded-circle"],["src","assets/images/profile_pic.png","alt","",1,"avatar-img"],[1,"flex-shrink-1","ms-2","ms-sm-3"],[1,"comment-meta","d-flex"],[1,"me-2"],[1,"text-muted"],[1,"comment-body"],[1,"send_btn_cmt",3,"click"],["src","assets/images/send.png"],[1,"score_p","leaderbord_list"],[1,"score_p_left"],["src","assets/images/profile_pic.png",1,"profile_pic"]],template:function(i,s){1&i&&(r._UZ(0,"app-header",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h2"),r._uU(4,"MR Zone"),r.qZA(),r.TgZ(5,"div",3),r.TgZ(6,"div",4),r.TgZ(7,"div",5),r.TgZ(8,"div",6),r.TgZ(9,"video",7),r.NdJ("ended",function(){return s.addPoints(10,"Video Watched")}),r.qZA(),r.TgZ(10,"ul",8),r.TgZ(11,"li"),r.TgZ(12,"span",9),r.TgZ(13,"span",10),r.NdJ("click",function(){return s.addLike()}),r._UZ(14,"img",11),r._UZ(15,"img",12),r.qZA(),r.YNc(16,h,2,1,"span",13),r.qZA(),r.qZA(),r.TgZ(17,"li"),r.TgZ(18,"a",14),r._UZ(19,"img",15),r.YNc(20,p,2,1,"span",16),r.qZA(),r.qZA(),r.TgZ(21,"li"),r.TgZ(22,"a",17),r.NdJ("click",function(){return s.addBookmark()}),r._UZ(23,"img",18),r._UZ(24,"img",19),r.qZA(),r.qZA(),r.TgZ(25,"li",20),r.TgZ(26,"a",21),r.NdJ("click",function(){return s.postShare()}),r._UZ(27,"img",22),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(28,"div",23),r.TgZ(29,"h3"),r._uU(30),r.qZA(),r.TgZ(31,"p"),r._uU(32),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"div",24),r.TgZ(34,"a",25),r.NdJ("click",function(){return s.openMrApp()}),r._UZ(35,"img",26),r.qZA(),r.qZA(),r.TgZ(36,"div",27),r.TgZ(37,"div",28),r.TgZ(38,"div",29),r.TgZ(39,"div",30),r.TgZ(40,"h5"),r._uU(41,"Comments"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(42,"div",29),r.TgZ(43,"div",30),r.TgZ(44,"div",31),r.YNc(45,_,12,3,"div",32),r.qZA(),r.qZA(),r.qZA(),r.TgZ(46,"div",33),r.TgZ(47,"div",30),r.TgZ(48,"div",34),r.TgZ(49,"div",35),r.TgZ(50,"textarea",36),r.NdJ("ngModelChange",function(i){return s.comment=i}),r.qZA(),r.YNc(51,u,2,0,"button",37),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(52,"div",24),r.TgZ(53,"a",38),r._UZ(54,"img",39),r.qZA(),r.qZA(),r.TgZ(55,"div",40),r.TgZ(56,"div",41),r.TgZ(57,"div",42),r.TgZ(58,"button",43),r._uU(59,"\xd7"),r.qZA(),r.TgZ(60,"div",44),r.TgZ(61,"div",45),r.YNc(62,Z,4,1,"div",46),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&i&&(r.Q6J("showMenu",!1)("backUrl","/mrzone")("showSearch",!1),r.xp6(9),r.Q6J("poster",s.timewallDetails.thumbnail,r.LSH)("src",s.timewallDetails.video,r.LSH),r.xp6(5),r.Q6J("ngClass",r.VKq(15,w,s.timewallDetails.isLiked)),r.xp6(2),r.Q6J("ngIf",s.timewallDetails.likes&&s.timewallDetails.likes.length),r.xp6(4),r.Q6J("ngIf",s.timewallDetails.comments&&s.timewallDetails.comments.length),r.xp6(3),r.Q6J("ngClass",r.VKq(17,w,s.timewallDetails.isBookmarked)),r.xp6(7),r.Oqu(s.timewallDetails.title),r.xp6(2),r.Oqu(s.timewallDetails.description),r.xp6(13),r.Q6J("ngForOf",s.timewallDetails.comments),r.xp6(5),r.Q6J("ngModel",s.comment),r.xp6(1),r.Q6J("ngIf",s.comment),r.xp6(11),r.Q6J("ngForOf",s.timewallDetails.likes))},directives:[m.G,t.mk,t.O5,t.sg,g.Fj,g.JJ,g.On],styles:[""]}),i})();function f(i,s){if(1&i&&(r.TgZ(0,"span",24),r._uU(1),r.qZA()),2&i){const i=r.oxw().$implicit;r.xp6(1),r.Oqu(i.numOfLikes)}}function q(i,s){if(1&i&&(r.TgZ(0,"span",24),r._uU(1),r.qZA()),2&i){const i=r.oxw().$implicit;r.xp6(1),r.Oqu(i.numOfComments)}}const v=function(i){return["/mrzone/detail",i]},A=function(i){return{active:i}};function T(i,s){if(1&i){const i=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"div",7),r._UZ(2,"img",8),r.TgZ(3,"a",9),r._UZ(4,"img",10),r.qZA(),r.TgZ(5,"ul",11),r.TgZ(6,"li"),r.TgZ(7,"a",12),r.NdJ("click",function(){const s=r.CHM(i).$implicit;return r.oxw().addLike(s._id)}),r._UZ(8,"img",13),r._UZ(9,"img",14),r.YNc(10,f,2,1,"span",15),r.qZA(),r.qZA(),r.TgZ(11,"li"),r.TgZ(12,"a",16),r._UZ(13,"img",17),r.YNc(14,q,2,1,"span",15),r.qZA(),r.qZA(),r.TgZ(15,"li"),r.TgZ(16,"a",12),r.NdJ("click",function(){const s=r.CHM(i).$implicit;return r.oxw().addBookmark(s._id)}),r._UZ(17,"img",18),r._UZ(18,"img",19),r.qZA(),r.qZA(),r.TgZ(19,"li",20),r.TgZ(20,"a",21),r.NdJ("click",function(){const s=r.CHM(i).$implicit;return r.oxw().postShare(s._id)}),r._UZ(21,"img",22),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(22,"div",23),r.TgZ(23,"h3"),r.TgZ(24,"a",16),r._uU(25),r.qZA(),r.qZA(),r.TgZ(26,"p"),r._uU(27),r.qZA(),r.qZA(),r.qZA()}if(2&i){const i=s.$implicit;r.xp6(2),r.Q6J("src",i.thumbnail,r.LSH),r.xp6(1),r.Q6J("routerLink",r.VKq(10,v,i._id)),r.xp6(5),r.Q6J("ngClass",r.VKq(12,A,i.isLiked)),r.xp6(2),r.Q6J("ngIf",i.numOfLikes),r.xp6(2),r.Q6J("routerLink",r.VKq(14,v,i._id)),r.xp6(2),r.Q6J("ngIf",i.numOfComments),r.xp6(3),r.Q6J("ngClass",r.VKq(16,A,i.isBookmarked)),r.xp6(7),r.Q6J("routerLink",r.VKq(18,v,i._id)),r.xp6(1),r.Oqu(i.title),r.xp6(2),r.Oqu(i.description)}}const b=[{path:"",component:(()=>{class i{constructor(i,s,e){this.userService=i,this.toastr=s,this.spinner=e,this.timewalls=[]}ngOnInit(){this.getAllPosts()}addPoints(i,s,e){this.userService.addPoints({post_id:e,points:i,activity:s}).subscribe(i=>{})}getAllPosts(){this.spinner.show(),this.userService.getAllPosts({type:"MRZONE"}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewalls=i.data.posts,this.timewalls.map(i=>{i.thumbnail=a.N.api_url+"/post/thumbnail/"+i.thumbnail})):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addLike(i){this.spinner.show(),this.userService.addLike({post_id:i}).subscribe(s=>{this.spinner.hide(),200===s.statusCode?this.timewalls.find(s=>{s._id==i&&(s.isLiked?(s.numOfLikes-=1,this.addPoints(-5,"Unlike",i)):(s.numOfLikes+=1,s.isLiked=!0,this.addPoints(5,"Like",i)))}):this.toastr.error(s.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addBookmark(i){this.spinner.show(),this.userService.addBookmark({post_id:i}).subscribe(s=>{this.spinner.hide(),200===s.statusCode?this.timewalls.find(s=>{s._id==i&&(s.isBookmarked=!s.isBookmarked),s.isBookmarked?this.addPoints(-5,"Bookmark",i):this.addPoints(5,"Unbookmark",i)}):this.toastr.error(s.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}postShare(i){window.plugins.socialsharing.shareWithOptions({message:"Check this out at Indian Oil",subject:"Check this out at Indian Oil",files:[],url:a.N.front_url+`?type=timewall&id=${i}`},function(i){console.log("Share completed? "+i.completed),console.log("Shared to app: "+i.app)},function(i){console.log("Sharing failed with message: "+i)})}}return i.\u0275fac=function(s){return new(s||i)(r.Y36(l.K),r.Y36(c._W),r.Y36(d.t2))},i.\u0275cmp=r.Xpm({type:i,selectors:[["app-mrzone"]],decls:8,vars:4,consts:[[3,"showMenu","backUrl","showSearch"],[1,"page_mid_area"],[1,"other_dig_ele_wrp"],[1,"other_dig_ele_con_w"],[1,"other_dig_ele_con_w_in"],["class","showcase_wrp",4,"ngFor","ngForOf"],[1,"showcase_wrp"],[1,"showcase_img_wrp"],[1,"showcase_img",3,"src"],[1,"showcase_play_icon",3,"routerLink"],["src","assets/images/play_icon.png"],[1,"showcase_icon_wrp"],["href","javascript:void(0)",1,"likebtn_list",3,"click"],["src","assets/images/like_icon.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/like_icon_active.png",1,"showcase_icon","like_thub_l"],["class","showcase_icon_txt",4,"ngIf"],[3,"routerLink"],["src","assets/images/comment_icon.png",1,"showcase_icon"],["src","assets/images/bookmark.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/bookmark_active.png",1,"showcase_icon","like_thub_l"],[1,"float-right"],["href","javascript:void(0)",3,"click"],["src","assets/images/share_icon.png",1,"showcase_icon"],[1,"showcase_txt_wrp"],[1,"showcase_icon_txt"]],template:function(i,s){1&i&&(r._UZ(0,"app-header",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h2"),r._uU(4,"MR Zone"),r.qZA(),r.TgZ(5,"div",3),r.TgZ(6,"div",4),r.YNc(7,T,28,20,"div",5),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&i&&(r.Q6J("showMenu",!0)("backUrl","")("showSearch",!0),r.xp6(7),r.Q6J("ngForOf",s.timewalls))},directives:[m.G,t.sg,o.yS,t.mk,t.O5],styles:[""]}),i})()},{path:"detail/:id",data:{header:!0},component:k}];let x=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=r.oAB({type:i}),i.\u0275inj=r.cJS({imports:[[o.Bz.forChild(b)],o.Bz]}),i})();var U=e(5425);let S=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=r.oAB({type:i}),i.\u0275inj=r.cJS({imports:[[t.ez,x,U.m,g.u5,g.UX]]}),i})()}}]);