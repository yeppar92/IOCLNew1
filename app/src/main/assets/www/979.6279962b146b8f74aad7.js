(self.webpackChunkapp=self.webpackChunkapp||[]).push([[979],{979:(i,s,t)=>{"use strict";t.r(s),t.d(s,{HolofanModule:()=>D});var e=t(1116),o=t(4587),a=t(529),n=t(8619),r=t(4345),l=t(3492),c=t(6710),d=t(992);function m(i,s){if(1&i&&(n.TgZ(0,"span",23),n._uU(1),n.qZA()),2&i){const i=n.oxw().$implicit;n.xp6(1),n.Oqu(i.numOfLikes)}}function h(i,s){if(1&i&&(n.TgZ(0,"span",23),n._uU(1),n.qZA()),2&i){const i=n.oxw().$implicit;n.xp6(1),n.Oqu(i.numOfComments)}}const g=function(i){return["/holofan/detail",i]},p=function(i){return{active:i}},_=function(i){return["/timewall/detail",i]};function u(i,s){if(1&i){const i=n.EpF();n.TgZ(0,"div",6),n.TgZ(1,"div",7),n._UZ(2,"img",8),n._UZ(3,"a",9),n.TgZ(4,"ul",10),n.TgZ(5,"li"),n.TgZ(6,"a",11),n.NdJ("click",function(){const s=n.CHM(i).$implicit;return n.oxw().addLike(s._id)}),n._UZ(7,"img",12),n._UZ(8,"img",13),n.YNc(9,m,2,1,"span",14),n.qZA(),n.qZA(),n.TgZ(10,"li"),n.TgZ(11,"a",15),n._UZ(12,"img",16),n.YNc(13,h,2,1,"span",14),n.qZA(),n.qZA(),n.TgZ(14,"li"),n.TgZ(15,"a",11),n.NdJ("click",function(){const s=n.CHM(i).$implicit;return n.oxw().addBookmark(s._id)}),n._UZ(16,"img",17),n._UZ(17,"img",18),n.qZA(),n.qZA(),n.TgZ(18,"li",19),n.TgZ(19,"a",20),n.NdJ("click",function(){const s=n.CHM(i).$implicit;return n.oxw().postShare(s._id)}),n._UZ(20,"img",21),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",22),n.TgZ(22,"h3"),n.TgZ(23,"a",15),n._uU(24),n.qZA(),n.qZA(),n.TgZ(25,"p"),n._uU(26),n.qZA(),n.qZA(),n.qZA()}if(2&i){const i=s.$implicit;n.xp6(2),n.Q6J("src",i.thumbnail,n.LSH),n.xp6(1),n.Q6J("routerLink",n.VKq(10,g,i._id)),n.xp6(4),n.Q6J("ngClass",n.VKq(12,p,i.isLiked)),n.xp6(2),n.Q6J("ngIf",i.numOfLikes),n.xp6(2),n.Q6J("routerLink",n.VKq(14,_,i._id)),n.xp6(2),n.Q6J("ngIf",i.numOfComments),n.xp6(3),n.Q6J("ngClass",n.VKq(16,p,i.isBookmarked)),n.xp6(7),n.Q6J("routerLink",n.VKq(18,g,i._id)),n.xp6(1),n.Oqu(i.title),n.xp6(2),n.Oqu(i.description)}}let Z=(()=>{class i{constructor(i,s,t){this.userService=i,this.toastr=s,this.spinner=t,this.timewalls=[]}ngOnInit(){this.getAllPosts()}addPoints(i,s,t){this.userService.addPoints({post_id:t,points:i,activity:s}).subscribe(i=>{})}getAllPosts(){this.spinner.show(),this.userService.getAllPosts({type:"HOLOFAN"}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewalls=i.data.posts,this.timewalls.map(i=>{i.thumbnail=a.N.api_url+"/post/thumbnail/"+i.thumbnail})):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addLike(i){this.spinner.show(),this.userService.addLike({post_id:i}).subscribe(s=>{this.spinner.hide(),200===s.statusCode?this.timewalls.find(s=>{s._id==i&&(s.isLiked?(s.numOfLikes-=1,s.isLiked=!1,this.addPoints(-5,"Unlike",i)):(s.numOfLikes+=1,s.isLiked=!0,this.addPoints(5,"Like",i)))}):this.toastr.error(s.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addBookmark(i){this.spinner.show(),this.userService.addBookmark({post_id:i}).subscribe(s=>{this.spinner.hide(),200===s.statusCode?this.timewalls.find(s=>{s._id==i&&(s.isBookmarked=!s.isBookmarked),s.isBookmarked?this.addPoints(-5,"Bookmark",i):this.addPoints(5,"Unbookmark",i)}):this.toastr.error(s.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}postShare(i){window.plugins.socialsharing.shareWithOptions({message:"Check this out at Indian Oil",subject:"Check this out at Indian Oil",files:[],url:a.N.front_url+`?type=timewall&id=${i}`},function(i){console.log("Share completed? "+i.completed),console.log("Shared to app: "+i.app)},function(i){console.log("Sharing failed with message: "+i)})}}return i.\u0275fac=function(s){return new(s||i)(n.Y36(r.K),n.Y36(l._W),n.Y36(c.t2))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-holofan"]],decls:8,vars:4,consts:[[3,"showMenu","backUrl","showSearch"],[1,"page_mid_area"],[1,"other_dig_ele_wrp"],[1,"other_dig_ele_con_w"],[1,"other_dig_ele_con_w_in"],["class","showcase_wrp",4,"ngFor","ngForOf"],[1,"showcase_wrp"],[1,"showcase_img_wrp"],[1,"showcase_img",3,"src"],[1,"showcase_play_icon",3,"routerLink"],[1,"showcase_icon_wrp"],["href","javascript:void(0)",1,"likebtn_list",3,"click"],["src","assets/images/like_icon.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/like_icon_active.png",1,"showcase_icon","like_thub_l"],["class","showcase_icon_txt",4,"ngIf"],[3,"routerLink"],["src","assets/images/comment_icon.png",1,"showcase_icon"],["src","assets/images/bookmark.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/bookmark_active.png",1,"showcase_icon","like_thub_l"],[1,"float-right"],["href","javascript:void(0)",3,"click"],["src","assets/images/share_icon.png",1,"showcase_icon"],[1,"showcase_txt_wrp"],[1,"showcase_icon_txt"]],template:function(i,s){1&i&&(n._UZ(0,"app-header",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"h2"),n._uU(4,"Holofan"),n.qZA(),n.TgZ(5,"div",3),n.TgZ(6,"div",4),n.YNc(7,u,27,20,"div",5),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&i&&(n.Q6J("showMenu",!0)("backUrl","")("showSearch",!0),n.xp6(7),n.Q6J("ngForOf",s.timewalls))},directives:[d.G,e.sg,o.yS,e.mk,e.O5],styles:[""]}),i})();var w=t(9609),k=t(1462);function f(i,s){if(1&i&&(n.TgZ(0,"span",42),n._uU(1),n.qZA()),2&i){const i=n.oxw();n.xp6(1),n.Oqu(i.timewallDetails.likes.length)}}function q(i,s){if(1&i&&(n.TgZ(0,"span",43),n._uU(1),n.qZA()),2&i){const i=n.oxw();n.xp6(1),n.Oqu(i.timewallDetails.comments.length)}}function v(i,s){if(1&i&&(n.TgZ(0,"div",44),n.TgZ(1,"div",45),n.TgZ(2,"div",46),n._UZ(3,"img",47),n.qZA(),n.qZA(),n.TgZ(4,"div",48),n.TgZ(5,"div",49),n.TgZ(6,"h6",50),n._uU(7),n.qZA(),n.TgZ(8,"span",51),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"div",52),n._uU(11),n.qZA(),n.qZA(),n.qZA()),2&i){const i=s.$implicit,t=n.oxw();n.xp6(7),n.Oqu(i.user_id.name),n.xp6(2),n.Oqu(t.timeFormat(i.createdAt)),n.xp6(2),n.hij(" ",i.comment," ")}}function A(i,s){if(1&i){const i=n.EpF();n.TgZ(0,"button",53),n.NdJ("click",function(){return n.CHM(i),n.oxw().addComment()}),n._UZ(1,"img",54),n.qZA()}}function T(i,s){if(1&i&&(n.TgZ(0,"div",55),n.TgZ(1,"div",56),n._UZ(2,"img",57),n._uU(3),n.qZA(),n.qZA()),2&i){const i=s.$implicit;n.xp6(3),n.hij(" ",i.user_id.name," ")}}const b=function(i){return{active:i}},x=[{path:"",component:Z},{path:"detail/:id",data:{header:!0},component:(()=>{class i{constructor(i,s,t,e){this.route=i,this.userService=s,this.toastr=t,this.spinner=e,this.timewallDetails={},this.comment="",w.updateLocale("en",{relativeTime:{future:"in %s",past:"%s",s:"just now",ss:"%d seconds ago",m:"a minute ago",mm:"%d minutes ago",h:"an hour ago",hh:"%dh ago",d:"a day ago",dd:"%d days ago",M:"a month ago",MM:"%d months ago",y:"a year ago",yy:"%d years ago"}})}ngOnInit(){this.route.params.subscribe(i=>{this.timewallDetail(i.id)})}addHistory(i){this.userService.addHistory({post_id:i}).subscribe(i=>{})}addPoints(i,s){this.userService.addPoints({post_id:this.timewallDetails._id,points:i,activity:s}).subscribe(i=>{})}timewallDetail(i){this.spinner.show(),this.userService.postDetail({id:i}).subscribe(s=>{this.spinner.hide(),200===s.statusCode?(this.timewallDetails=s.data.post,this.timewallDetails.video=a.N.api_url+"/post/videos/"+this.timewallDetails.video,this.timewallDetails.thumbnail=a.N.api_url+"/post/thumbnail/"+this.timewallDetails.thumbnail,this.addHistory(i)):this.toastr.error(s.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}timeFormat(i){return w(i).fromNow()}addComment(){this.spinner.show(),this.userService.addComment({post_id:this.timewallDetails._id,comment:this.comment}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewallDetails.comments.push(i.data.comment),setTimeout(()=>{const i=document.getElementById("commentsDiv");i.scrollTop=i.scrollHeight},100),this.addPoints(5,"Comment"),this.comment=""):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addLike(){this.spinner.show(),this.userService.addLike({post_id:this.timewallDetails._id}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewallDetails.isLiked=!this.timewallDetails.isLiked,this.timewallDetails.likes=i.data.likes,this.timewallDetails.isLiked?this.addPoints(5,"Like"):this.addPoints(-5,"Unlike")):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addBookmark(){this.spinner.show(),this.userService.addBookmark({post_id:this.timewallDetails._id}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewallDetails.isBookmarked=!this.timewallDetails.isBookmarked,this.timewallDetails.isBookmarked?this.addPoints(5,"Bookmark"):this.addPoints(-5,"Unbookmark")):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}postShare(){window.plugins.socialsharing.shareWithOptions({message:"Check this out at Indian Oil",subject:"Check this out at Indian Oil",files:[],url:a.N.front_url+`?type=timewall&id=${this.timewallDetails._id}`},function(i){console.log("Share completed? "+i.completed),console.log("Shared to app: "+i.app)},function(i){console.log("Sharing failed with message: "+i)})}}return i.\u0275fac=function(s){return new(s||i)(n.Y36(o.gz),n.Y36(r.K),n.Y36(l._W),n.Y36(c.t2))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-detail"]],decls:57,vars:19,consts:[[3,"showMenu","backUrl","showSearch"],[1,"page_mid_area"],[1,"other_dig_ele_wrp"],[1,"other_dig_ele_con_w"],["id","commentsDiv",1,"other_dig_ele_con_w_in","setting_in_wrp"],[1,"showcase_wrp","detail_wall_wrp_l"],[1,"showcase_img_wrp"],["controls","","autoplay","","id","timewallVideo",2,"width","100%","height","100%",3,"poster","src","ended"],[1,"showcase_icon_wrp","wall_detail_icon"],[1,"likebtn_list"],[2,"margin-right","5px",3,"click"],["src","assets/images/like_icon.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/like_icon_active.png",1,"showcase_icon","like_thub_l"],["class","showcase_icon_txt","data-toggle","modal","data-target","#likeModal",4,"ngIf"],["href","javascript:void(0)"],["src","assets/images/comment_icon.png",1,"showcase_icon"],["class","showcase_icon_txt",4,"ngIf"],["href","javascript:void(0)",1,"likebtn_list",3,"click"],["src","assets/images/bookmark.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/bookmark_active.png",1,"showcase_icon","like_thub_l"],[1,"float-right"],["href","javascript:void(0)",3,"click"],["src","assets/images/share_icon.png",1,"showcase_icon"],[1,"showcase_txt_wrp"],[1,"d-flex","align-items-center","justify-content-center","cmt_wrp"],[1,"container"],[1,"row","justify-content-center","mb-4"],[1,"col-lg-8"],[1,"comments","padd_botm50"],["class","comment d-flex mb-4",4,"ngFor","ngForOf"],[1,"row","justify-content-center","cmt_frm_wrp","cmt_frm_fixed_botm"],[1,"comment-form","d-flex","align-items-center"],[1,"flex-grow-1","ms-2","ms-sm-3"],["rows","1","placeholder","Start writing...",1,"form-control","py-0","px-1","border-0","textarea_cmd",2,"resize","none",3,"ngModel","ngModelChange"],["class","send_btn_cmt",3,"click",4,"ngIf"],["id","likeModal",1,"modal"],[1,"modal-dialog"],[1,"modal-content"],["type","button","data-dismiss","modal",1,"close","poup_close"],[1,"modal-body"],[1,"like_user_list"],["class","score_p leaderbord_list",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#likeModal",1,"showcase_icon_txt"],[1,"showcase_icon_txt"],[1,"comment","d-flex","mb-4"],[1,"flex-shrink-0"],[1,"avatar","avatar-sm","rounded-circle"],["src","assets/images/profile_pic.png","alt","",1,"avatar-img"],[1,"flex-shrink-1","ms-2","ms-sm-3"],[1,"comment-meta","d-flex"],[1,"me-2"],[1,"text-muted"],[1,"comment-body"],[1,"send_btn_cmt",3,"click"],["src","assets/images/send.png"],[1,"score_p","leaderbord_list"],[1,"score_p_left"],["src","assets/images/profile_pic.png",1,"profile_pic"]],template:function(i,s){1&i&&(n._UZ(0,"app-header",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"h2"),n._uU(4,"Holofan"),n.qZA(),n.TgZ(5,"div",3),n.TgZ(6,"div",4),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"video",7),n.NdJ("ended",function(){return s.addPoints(10,"Video Watched")}),n.qZA(),n.TgZ(10,"ul",8),n.TgZ(11,"li"),n.TgZ(12,"span",9),n.TgZ(13,"span",10),n.NdJ("click",function(){return s.addLike()}),n._UZ(14,"img",11),n._UZ(15,"img",12),n.qZA(),n.YNc(16,f,2,1,"span",13),n.qZA(),n.qZA(),n.TgZ(17,"li"),n.TgZ(18,"a",14),n._UZ(19,"img",15),n.YNc(20,q,2,1,"span",16),n.qZA(),n.qZA(),n.TgZ(21,"li"),n.TgZ(22,"a",17),n.NdJ("click",function(){return s.addBookmark()}),n._UZ(23,"img",18),n._UZ(24,"img",19),n.qZA(),n.qZA(),n.TgZ(25,"li",20),n.TgZ(26,"a",21),n.NdJ("click",function(){return s.postShare()}),n._UZ(27,"img",22),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(28,"div",23),n.TgZ(29,"h3"),n._uU(30),n.qZA(),n.TgZ(31,"p"),n._uU(32),n.qZA(),n.qZA(),n.qZA(),n.TgZ(33,"div",24),n.TgZ(34,"div",25),n.TgZ(35,"div",26),n.TgZ(36,"div",27),n.TgZ(37,"h5"),n._uU(38,"Comments"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(39,"div",26),n.TgZ(40,"div",27),n.TgZ(41,"div",28),n.YNc(42,v,12,3,"div",29),n.qZA(),n.qZA(),n.qZA(),n.TgZ(43,"div",30),n.TgZ(44,"div",27),n.TgZ(45,"div",31),n.TgZ(46,"div",32),n.TgZ(47,"textarea",33),n.NdJ("ngModelChange",function(i){return s.comment=i}),n.qZA(),n.YNc(48,A,2,0,"button",34),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(49,"div",35),n.TgZ(50,"div",36),n.TgZ(51,"div",37),n.TgZ(52,"button",38),n._uU(53,"\xd7"),n.qZA(),n.TgZ(54,"div",39),n.TgZ(55,"div",40),n.YNc(56,T,4,1,"div",41),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&i&&(n.Q6J("showMenu",!1)("backUrl","/holofan")("showSearch",!1),n.xp6(9),n.Q6J("poster",s.timewallDetails.thumbnail,n.LSH)("src",s.timewallDetails.video,n.LSH),n.xp6(5),n.Q6J("ngClass",n.VKq(15,b,s.timewallDetails.isLiked)),n.xp6(2),n.Q6J("ngIf",s.timewallDetails.likes&&s.timewallDetails.likes.length),n.xp6(4),n.Q6J("ngIf",s.timewallDetails.comments&&s.timewallDetails.comments.length),n.xp6(3),n.Q6J("ngClass",n.VKq(17,b,s.timewallDetails.isBookmarked)),n.xp6(7),n.Oqu(s.timewallDetails.title),n.xp6(2),n.Oqu(s.timewallDetails.description),n.xp6(10),n.Q6J("ngForOf",s.timewallDetails.comments),n.xp6(5),n.Q6J("ngModel",s.comment),n.xp6(1),n.Q6J("ngIf",s.comment),n.xp6(8),n.Q6J("ngForOf",s.timewallDetails.likes))},directives:[d.G,e.mk,e.O5,e.sg,k.Fj,k.JJ,k.On],styles:["video[_ngcontent-%COMP%]::-webkit-media-controls-mute-button, video[_ngcontent-%COMP%]::-webkit-media-controls-volume-slider{display:none}"]}),i})()}];let U=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[o.Bz.forChild(x)],o.Bz]}),i})();var S=t(5425);let D=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[e.ez,U,k.u5,k.UX,S.m]]}),i})()}}]);